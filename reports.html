<html><head>
<title>DonorShip AI - Enhanced Campaign Reports</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<style>
  :root {
    --primary: #0A2647;
    --secondary: #144272;
    --accent: #2C74B3;
    --light: #205295;
    --background: #f5f7fa;
    --text: #333;
    --card-bg: #ffffff;
    --success: #4CAF50;
    --warning: #FFC107;
    --danger: #F44336;
  }

  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  body, html {
    font-family: 'Roboto', sans-serif;
    background-color: var(--background);
    color: var(--text);
    line-height: 1.6;
  }

  .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px;
  }

  header {
    background-color: var(--primary);
    padding: 15px 0;
    position: sticky;
    top: 0;
    z-index: 1000;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  }

  .header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 20px;
  }

  .logo {
    font-size: 24px;
    font-weight: 700;
    color: white;
  }

  nav ul {
    list-style-type: none;
    display: flex;
    gap: 20px;
  }

  nav ul li a {
    text-decoration: none;
    color: white;
    font-weight: 500;
    transition: color 0.3s ease, transform 0.3s ease;
  }

  nav ul li a:hover {
    color: var(--accent);
    transform: translateY(-2px);
  }

  .dashboard {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 30px;
  }

  .card {
    background-color: var(--card-bg);
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }

  .card-title {
    font-size: 18px;
    font-weight: 500;
    margin-bottom: 15px;
  }

  .stat {
    font-size: 24px;
    font-weight: 700;
    color: var(--accent);
  }

  .chart-container {
    height: 300px;
    margin-top: 20px;
  }

  .table-container {
    overflow-x: auto;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
  }

  th, td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #ddd;
  }

  th {
    background-color: var(--light);
    color: white;
    cursor: pointer;
  }

  th:hover {
    background-color: var(--secondary);
  }

  tr:hover {
    background-color: #f5f5f5;
    cursor: pointer;
  }

  .btn {
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.3s ease;
    font-weight: 500;
  }

  .btn-primary {
    background-color: var(--accent);
    color: white;
  }

  .btn-primary:hover {
    background-color: var(--secondary);
    transform: translateY(-2px);
  }

  .filters {
    display: flex;
    gap: 15px;
    margin-bottom: 20px;
    flex-wrap: wrap;
  }

  .filter-select {
    padding: 8px;
    border-radius: 4px;
    border: 1px solid #ddd;
  }

  #dateRange {
    padding: 8px;
    border-radius: 4px;
    border: 1px solid #ddd;
    cursor: pointer;
  }

  .loading {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255,255,255,.3);
    border-radius: 50%;
    border-top-color: #fff;
    animation: spin 1s ease-in-out infinite;
    margin-left: 10px;
  }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }

  .tooltip {
    position: absolute;
    background-color: rgba(0,0,0,0.8);
    color: white;
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 12px;
    pointer-events: none;
  }

  .retention-info {
    font-size: 14px;
    color: #666;
    margin-top: 10px;
  }

  .pagination {
    display: flex;
    justify-content: center;
    margin-top: 20px;
  }

  .pagination button {
    margin: 0 5px;
    padding: 5px 10px;
    border: 1px solid var(--accent);
    background-color: white;
    color: var(--accent);
    cursor: pointer;
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  .pagination button:hover, .pagination button.active {
    background-color: var(--accent);
    color: white;
  }

  @media (max-width: 768px) {
    .header-content {
      flex-direction: column;
      align-items: flex-start;
    }

    nav ul {
      margin-top: 15px;
      flex-wrap: wrap;
    }

    .dashboard {
      grid-template-columns: 1fr;
    }

    .filters {
      flex-direction: column;
    }
  }
</style>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
</head>
<body>
  <header>
    <div class="header-content">
      <div class="logo">DonorShip AI</div>
      <nav>
        <ul>
          <li><a href="index.html">Dashboard</a></li>
          <li><a href="donors.html">Donors</a></li>
          <li><a href="campaigns.html">Campaigns</a></li>
          <li><a href="reports.html">Reports</a></li>
          <li><a href="/settings">Settings</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <div class="container">
    <h1>Campaign Reports</h1>
    
    <div class="filters">
      <input type="text" id="dateRange" placeholder="Select date range">
      <select class="filter-select" id="campaignFilter" multiple>
        <option value="all" selected>All Campaigns</option>
        <option value="clean-water">Clean Water Initiative</option>
        <option value="education">Education for All</option>
        <option value="digital-literacy">Digital Literacy Program</option>
        <option value="community-health">Community Health Initiative</option>
      </select>
      <button class="btn btn-primary" id="generateReport">Generate Report <span class="loading" style="display: none;"></span></button>
    </div>

    <div class="dashboard">
      <div class="card">
        <h2 class="card-title">Total Donations</h2>
        <div class="stat">$1,234,567</div>
        <div class="chart-container">
          <canvas id="donationsChart"></canvas>
        </div>
      </div>
      <div class="card">
        <h2 class="card-title">Donor Retention Rate</h2>
        <div class="stat">78%</div>
        <div class="chart-container">
          <canvas id="retentionChart"></canvas>
        </div>
        <p class="retention-info">Our donor retention rate has improved by 5% compared to last quarter, thanks to our new engagement strategies.</p>
      </div>
      <div class="card">
        <h2 class="card-title">Campaign Performance</h2>
        <div class="chart-container">
          <canvas id="performanceChart"></canvas>
        </div>
      </div>
    </div>

    <div class="card">
      <h2 class="card-title">Top Campaigns</h2>
      <div class="table-container">
        <table id="campaignTable">
          <thead>
            <tr>
              <th>Campaign Name</th>
              <th>Total Raised</th>
              <th>Donors</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Clean Water Initiative</td>
              <td>$75,000</td>
              <td>1,250</td>
              <td>Active</td>
            </tr>
            <tr>
              <td>Education for All</td>
              <td>$50,000</td>
              <td>875</td>
              <td>Active</td>
            </tr>
            <tr>
              <td>Digital Literacy Program</td>
              <td>$30,000</td>
              <td>520</td>
              <td>Ended</td>
            </tr>
            <tr>
              <td>Community Health Initiative</td>
              <td>$100,000</td>
              <td>1,800</td>
              <td>Active</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="pagination">
        <button>1</button>
        <button>2</button>
        <button>3</button>
        <button>Next &raquo;</button>
      </div>
    </div>
  </div>

  <script>
    // Date Range Picker
    flatpickr("#dateRange", {
      mode: "range",
      dateFormat: "Y-m-d",
      defaultDate: [new Date().setDate(new Date().getDate() - 30), new Date()]
    });

    // Donations Chart
    const donationsCtx = document.getElementById('donationsChart').getContext('2d');
    const donationsChart = new Chart(donationsCtx, {
      type: 'line',
      data: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
        datasets: [{
          label: 'Donations',
          data: [65000, 59000, 80000, 81000, 56000, 55000],
          borderColor: 'rgb(75, 192, 192)',
          tension: 0.1
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        interaction: {
          intersect: false,
          mode: 'index',
        },
        plugins: {
          tooltip: {
            callbacks: {
              label: function(context) {
                let label = context.dataset.label || '';
                if (label) {
                  label += ': ';
                }
                if (context.parsed.y !== null) {
                  label += new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(context.parsed.y);
                }
                return label;
              }
            }
          }
        }
      }
    });

    // Retention Chart
    const retentionCtx = document.getElementById('retentionChart').getContext('2d');
    const retentionChart = new Chart(retentionCtx, {
      type: 'doughnut',
      data: {
        labels: ['Retained', 'Lost'],
        datasets: [{
          data: [78, 22],
          backgroundColor: ['rgb(75, 192, 192)', 'rgb(255, 99, 132)']
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          tooltip: {
            callbacks: {
              label: function(context) {
                let label = context.label || '';
                if (label) {
                  label += ': ';
                }
                label += context.parsed + '%';
                return label;
              }
            }
          }
        }
      }
    });

    // Performance Chart
    const performanceCtx = document.getElementById('performanceChart').getContext('2d');
    const performanceChart = new Chart(performanceCtx, {
      type: 'bar',
      data: {
        labels: ['Clean Water', 'Education', 'Digital Literacy', 'Health'],
        datasets: [{
          label: 'Raised',
          data: [75000, 50000, 30000, 100000],
          backgroundColor: 'rgba(75, 192, 192, 0.6)'
        }, {
          label: 'Goal',
          data: [100000, 75000, 50000, 150000],
          backgroundColor: 'rgba(255, 99, 132, 0.6)'
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          y: {
            beginAtZero: true,
            ticks: {
              callback: function(value, index, values) {
                return '$' + value.toLocaleString();
              }
            }
          }
        },
        plugins: {
          tooltip: {
            callbacks: {
              label: function(context) {
                let label = context.dataset.label || '';
                if (label) {
                  label += ': ';
                }
                if (context.parsed.y !== null) {
                  label += new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(context.parsed.y);
                }
                return label;
              }
            }
          }
        }
      }
    });

    // Generate Report Button
    document.getElementById('generateReport').addEventListener('click', function() {
      const dateRange = document.getElementById('dateRange').value;
      const campaignFilter = Array.from(document.getElementById('campaignFilter').selectedOptions).map(option => option.value);
      const loadingIndicator = this.querySelector('.loading');
      
      loadingIndicator.style.display = 'inline-block';
      this.disabled = true;

      // Simulating API call
      setTimeout(() => {
        loadingIndicator.style.display = 'none';
        this.disabled = false;
        alert(`Report generated for date range: ${dateRange}, campaigns: ${campaignFilter.join(', ')}`);
      }, 2000);
    });

    // Sortable table
    document.querySelectorAll('#campaignTable th').forEach(headerCell => {
      headerCell.addEventListener('click', () => {
        const tableElement = headerCell.parentElement.parentElement.parentElement;
        const headerIndex = Array.prototype.indexOf.call(headerCell.parentElement.children, headerCell);
        const currentIsAscending = headerCell.classList.contains('th-sort-asc');

        sortTableByColumn(tableElement, headerIndex, !currentIsAscending);
      });
    });

    // Table sorting function
    function sortTableByColumn(table, column, asc = true) {
      const dirModifier = asc ? 1 : -1;
      const tBody = table.tBodies[0];
      const rows = Array.from(tBody.querySelectorAll('tr'));

      const sortedRows = rows.sort((a, b) => {
        const aColText = a.querySelector(`td:nth-child(${column + 1})`).textContent.trim();
        const bColText = b.querySelector(`td:nth-child(${column + 1})`).textContent.trim();

        return aColText > bColText ? (1 * dirModifier) : (-1 * dirModifier);
      });

      while (tBody.firstChild) {
        tBody.removeChild(tBody.firstChild);
      }

      tBody.append(...sortedRows);

      table.querySelectorAll('th').forEach(th => th.classList.remove('th-sort-asc', 'th-sort-desc'));
      table.querySelector(`th:nth-child(${column + 1})`).classList.toggle('th-sort-asc', asc);
      table.querySelector(`th:nth-child(${column + 1})`).classList.toggle('th-sort-desc', !asc);
    }

    // Clickable rows
    document.querySelectorAll('#campaignTable tbody tr').forEach(row => {
      row.addEventListener('click', () => {
        const campaignName = row.querySelector('td').textContent;
        alert(`Viewing detailed report for ${campaignName}`);
        // Here you would typically navigate to a detailed report page or open a modal
      });
    });

    // Pagination (simplified example)
    document.querySelectorAll('.pagination button').forEach(button => {
      button.addEventListener('click', function() {
        document.querySelectorAll('.pagination button').forEach(btn => btn.classList.remove('active'));
        this.classList.add('active');
        // Here you would typically fetch and display the corresponding page of data
        alert(`Navigating to page ${this.textContent}`);
      });
    });
  </script>
</body>
</html>